-- These tests are for new backend
local compile = function(f)
  if ravi.jit() then
    assert(ravi.compile(f))
  end
  return true
end

local x = function() end

compile(x)

x = function() return 42 end

compile(x)
assert(x() == 42)

x = function() return 4.256 end

compile(x)
assert(x() == 4.256)

x = function() return 'hello' end

compile(x)
assert(x() == 'hello')

x = function() 
		local j
		for i=1,10 do 
			for k = 0,5,5 do
				j = k 
			end 
		end
		return j
	end

compile(x)
assert(x() == 5)

x = function()
		local a,b = false, true
		return a
	end

compile(x)
assert(not x())

x = function()
		local a
		if 2 < 5 then
			a = true
		else
			a = false
		end
	end
compile(x)
assert(not x())

print'Ok'